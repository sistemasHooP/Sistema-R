<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gest√£o RPPS</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèõÔ∏è</text></svg>">
    
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- CSS do Sistema -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-slate-100 font-sans antialiased">

    <!-- =========================================================================== -->
    <!-- ESTRUTURA PRINCIPAL -->
    <!-- =========================================================================== -->
    
    <div class="flex min-h-screen">
        
        <!-- ======================================================================= -->
        <!-- SIDEBAR (MENU LATERAL) -->
        <!-- ======================================================================= -->
        <aside id="sidebar" class="w-64 bg-slate-900 text-white flex flex-col fixed h-full z-40 transition-transform duration-300 lg:translate-x-0 -translate-x-full">
            
            <!-- Logo / Identifica√ß√£o -->
            <div class="p-5 border-b border-slate-700/50">
                <div class="flex items-center gap-3">
                    <div id="sidebarLogoContainer" class="h-10 w-10 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg">
                        <img id="sidebarLogo" src="" class="h-8 w-8 object-contain hidden rounded">
                        <i id="sidebarLogoIcon" class="fa-solid fa-building-columns text-white text-lg"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h1 id="sidebarNome" class="text-sm font-bold truncate text-white">RPPS</h1>
                        <p id="sidebarCNPJ" class="text-[10px] text-slate-400 truncate">Sistema de Gest√£o</p>
                    </div>
                </div>
            </div>
            
            <!-- Menu de Navega√ß√£o -->
            <nav class="flex-1 overflow-y-auto py-4 px-3 space-y-1">
                
                <!-- In√≠cio -->
                <button onclick="showPage('page-guia-rapido')" id="menu-guia-rapido" class="menu-item w-full">
                    <i class="fa-solid fa-house w-5"></i>
                    <span>In√≠cio</span>
                </button>
                
                <!-- Dashboard -->
                <button onclick="showPage('page-dashboard')" id="menu-dashboard" class="menu-item w-full">
                    <i class="fa-solid fa-chart-pie w-5"></i>
                    <span>Dashboard</span>
                </button>
                
                <!-- Divisor -->
                <div class="pt-4 pb-2">
                    <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest px-3">Receitas</p>
                </div>
                
                <!-- Recolhimento -->
                <button onclick="showPage('page-recolhimento')" id="menu-recolhimento" class="menu-item w-full">
                    <i class="fa-solid fa-file-invoice-dollar w-5"></i>
                    <span>Guias / Receitas</span>
                </button>
                
                <!-- Previd√™ncia Municipal -->
                <button onclick="showPage('page-prev-municipal')" id="menu-prev-municipal" class="menu-item w-full">
                    <i class="fa-solid fa-piggy-bank w-5"></i>
                    <span>Prev. Municipal</span>
                </button>
                
                <!-- Imposto de Renda -->
                <button onclick="showPage('page-imposto-renda')" id="menu-imposto-renda" class="menu-item w-full">
                    <i class="fa-solid fa-scale-balanced w-5"></i>
                    <span>Imposto Renda</span>
                </button>
                
                <!-- Divisor -->
                <div class="pt-4 pb-2">
                    <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest px-3">Despesas</p>
                </div>
                
                <!-- Folha de Pagamento -->
                <button onclick="showPage('page-folha')" id="menu-folha" class="menu-item w-full">
                    <i class="fa-solid fa-users-viewfinder w-5"></i>
                    <span>Folha Pagamento</span>
                </button>
                
                <!-- Despesas Administrativas -->
                <button onclick="showPage('page-despesas')" id="menu-despesas" class="menu-item w-full">
                    <i class="fa-solid fa-file-invoice w-5"></i>
                    <span>Despesas Adm.</span>
                </button>
                
                <!-- Consignados -->
                <button onclick="showPage('page-consignados')" id="menu-consignados" class="menu-item w-full">
                    <i class="fa-solid fa-file-contract w-5"></i>
                    <span>Consignados</span>
                </button>
                
                <!-- Divisor -->
                <div class="pt-4 pb-2">
                    <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest px-3">Financeiro</p>
                </div>
                
                <!-- Pagamentos -->
                <button onclick="showPage('page-pagamentos')" id="menu-pagamentos" class="menu-item w-full">
                    <i class="fa-solid fa-money-bill-transfer w-5"></i>
                    <span>Pagamentos</span>
                </button>
                
                <!-- Margem -->
                <button onclick="showPage('page-margem')" id="menu-margem" class="menu-item w-full">
                    <i class="fa-solid fa-calculator w-5"></i>
                    <span>Margem Consig.</span>
                </button>
                
                <!-- Divisor -->
                <div class="pt-4 pb-2">
                    <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest px-3">Gest√£o</p>
                </div>
                
                <!-- Relat√≥rios -->
                <button onclick="showPage('page-relatorios')" id="menu-relatorios" class="menu-item w-full">
                    <i class="fa-solid fa-print w-5"></i>
                    <span>Relat√≥rios</span>
                </button>
                
                <!-- Arquivos -->
                <button onclick="showPage('page-arquivos')" id="menu-arquivos" class="menu-item w-full">
                    <i class="fa-solid fa-folder-open w-5"></i>
                    <span>Arquivos (GED)</span>
                </button>
                
                <!-- Importa√ß√£o -->
                <button onclick="showPage('page-importacao')" id="menu-importacao" class="menu-item w-full">
                    <i class="fa-solid fa-file-import w-5"></i>
                    <span>Importa√ß√£o</span>
                </button>
                
                <!-- Divisor -->
                <div class="pt-4 pb-2">
                    <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest px-3">Sistema</p>
                </div>
                
                <!-- Configura√ß√µes -->
                <button onclick="showPage('page-config')" id="menu-config" class="menu-item w-full">
                    <i class="fa-solid fa-gear w-5"></i>
                    <span>Configura√ß√µes</span>
                </button>
                
            </nav>
            
            <!-- Rodap√© do Sidebar -->
            <div class="p-4 border-t border-slate-700/50">
                <p class="text-[10px] text-slate-500 text-center">
                    Sistema RPPS v2.0<br>
                    <span id="sidebarAno">2025</span>
                </p>
            </div>
        </aside>
        
        <!-- ======================================================================= -->
        <!-- √ÅREA PRINCIPAL (CONTE√öDO) -->
        <!-- ======================================================================= -->
        <main class="flex-1 lg:ml-64 flex flex-col min-h-screen">
            
            <!-- Header Superior -->
            <header class="bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between sticky top-0 z-30 shadow-sm">
                
                <!-- Bot√£o Menu Mobile -->
                <button onclick="toggleSidebar()" class="lg:hidden p-2 rounded-lg hover:bg-slate-100 transition">
                    <i class="fa-solid fa-bars text-slate-600"></i>
                </button>
                
                <!-- Sauda√ß√£o -->
                <div class="hidden sm:block">
                    <p class="text-sm text-slate-500" id="saudacaoHeader">Bem-vindo ao sistema</p>
                </div>
                
                <!-- A√ß√µes do Header -->
                <div class="flex items-center gap-3">
                    <!-- Data Atual -->
                    <div class="hidden md:flex items-center gap-2 bg-slate-50 px-3 py-2 rounded-lg border border-slate-200">
                        <i class="fa-regular fa-calendar text-slate-400 text-sm"></i>
                        <span id="dataAtualHeader" class="text-xs font-medium text-slate-600">--/--/----</span>
                    </div>
                    
                    <!-- Bot√£o Atualizar -->
                    <button onclick="location.reload()" class="p-2 rounded-lg hover:bg-slate-100 transition text-slate-500 hover:text-blue-600" title="Recarregar Sistema">
                        <i class="fa-solid fa-rotate"></i>
                    </button>
                </div>
            </header>
            
            <!-- Container de P√°ginas -->
            <div id="page-container" class="flex-1 p-6 overflow-y-auto">
                
                <!-- As p√°ginas ser√£o inseridas aqui via JavaScript -->
                <div id="page-loading" class="flex flex-col items-center justify-center h-64">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"></div>
                    <p class="text-slate-500">Carregando sistema...</p>
                </div>
                
            </div>
            
        </main>
        
    </div>
    
    <!-- =========================================================================== -->
    <!-- LOADING OVERLAY (GLOBAL) -->
    <!-- =========================================================================== -->
    <div id="loading" class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[100] flex items-center justify-center hidden">
        <div class="bg-white p-8 rounded-2xl shadow-2xl flex flex-col items-center gap-4">
            <div class="relative">
                <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-200"></div>
                <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent absolute inset-0"></div>
            </div>
            <p class="text-slate-600 font-medium">Processando...</p>
        </div>
    </div>
    
    <!-- =========================================================================== -->
    <!-- MODAL DE ALERTA DO SISTEMA -->
    <!-- =========================================================================== -->
    <div id="modalAlerta" class="fixed inset-0 z-[90] overflow-y-auto hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-slate-900/75 transition-opacity backdrop-blur-sm" onclick="fecharAlerta()"></div>
        
        <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-md animate-modal-in">
                
                <!-- √çcone Din√¢mico -->
                <div class="flex justify-center pt-8">
                    <div id="alertaIcone" class="h-16 w-16 rounded-full flex items-center justify-center text-3xl">
                        <i class="fa-solid fa-circle-info"></i>
                    </div>
                </div>
                
                <!-- Conte√∫do -->
                <div class="px-8 pt-4 pb-6 text-center">
                    <h3 id="alertaTitulo" class="text-xl font-bold text-slate-800 mb-2">T√≠tulo</h3>
                    <p id="alertaMensagem" class="text-sm text-slate-600 whitespace-pre-line">Mensagem do alerta.</p>
                </div>
                
                <!-- Bot√µes -->
                <div id="alertaBotoes" class="bg-slate-50 px-6 py-4 flex justify-center gap-3 border-t border-slate-100">
                    <!-- Bot√µes din√¢micos via JS -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- =========================================================================== -->
    <!-- MODAL DE PAGAMENTO -->
    <!-- =========================================================================== -->
    <div id="modalPagamento" class="fixed inset-0 z-[80] overflow-y-auto hidden" aria-modal="true">
        <div class="fixed inset-0 bg-slate-900/75 backdrop-blur-sm" onclick="closeModal()"></div>
        
        <div class="flex min-h-full items-center justify-center p-4">
            <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden animate-modal-in">
                
                <!-- Header do Modal -->
                <div class="bg-gradient-to-r from-emerald-600 to-emerald-700 px-6 py-5 text-white">
                    <div class="flex items-center gap-4">
                        <div class="h-12 w-12 rounded-xl bg-white/20 flex items-center justify-center">
                            <i class="fa-solid fa-money-bill-wave text-xl"></i>
                        </div>
                        <div>
                            <p class="text-xs text-emerald-200 uppercase tracking-widest font-bold">Compet√™ncia</p>
                            <h3 id="modalCompetencia" class="text-2xl font-black">--/----</h3>
                        </div>
                    </div>
                </div>
                
                <!-- Corpo do Modal -->
                <div class="px-6 py-6">
                    <input type="hidden" id="modalIdHidden">
                    
                    <!-- Nome da Guia/Despesa -->
                    <div class="mb-4">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1">Refer√™ncia</p>
                        <p id="modalNomeGuia" class="text-lg font-bold text-slate-800">Nome do Item</p>
                    </div>
                    
                    <!-- Valores -->
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-slate-50 p-4 rounded-xl border border-slate-200">
                            <p class="text-[10px] font-bold text-slate-400 uppercase">Valor Total</p>
                            <p id="modalValorTotal" class="text-xl font-black text-slate-800">R$ 0,00</p>
                        </div>
                        <div class="bg-red-50 p-4 rounded-xl border border-red-100">
                            <p class="text-[10px] font-bold text-red-400 uppercase">Saldo Restante</p>
                            <p id="modalSaldoRestante" class="text-xl font-black text-red-600">R$ 0,00</p>
                        </div>
                    </div>
                    
                    <!-- Formul√°rio -->
                    <form onsubmit="confirmarPagamento(event)">
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="label-padrao">Data do Pagamento</label>
                                <input type="date" id="modalData" required class="input-padrao">
                            </div>
                            <div>
                                <label class="label-padrao">Valor a Pagar (R$)</label>
                                <input type="text" id="modalValorPago" required class="input-padrao mask-money font-bold text-emerald-600">
                            </div>
                        </div>
                        
                        <!-- Hist√≥rico Mini -->
                        <div class="mb-4">
                            <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-2">Pagamentos Anteriores</p>
                            <div class="max-h-32 overflow-y-auto border border-slate-200 rounded-lg">
                                <table class="w-full text-sm">
                                    <tbody id="historicoPagamentosBody" class="divide-y divide-slate-100">
                                        <tr><td colspan="2" class="p-3 text-center text-slate-400 text-xs">Nenhum pagamento anterior.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Bot√µes -->
                        <div class="flex gap-3 pt-4 border-t border-slate-100">
                            <button type="button" onclick="closeModal()" class="btn-secondary flex-1">
                                <i class="fa-solid fa-xmark mr-2"></i> Cancelar
                            </button>
                            <button type="submit" class="btn-primary flex-1 bg-emerald-600 hover:bg-emerald-700 border-none">
                                <i class="fa-solid fa-check mr-2"></i> Confirmar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- =========================================================================== -->
    <!-- OVERLAY DO SIDEBAR MOBILE -->
    <!-- =========================================================================== -->
    <div id="sidebarOverlay" class="fixed inset-0 bg-black/50 z-30 hidden lg:hidden" onclick="toggleSidebar()"></div>
    
    <!-- =========================================================================== -->
    <!-- SCRIPTS DO SISTEMA -->
    <!-- =========================================================================== -->
    
    <!-- Configura√ß√£o da API -->
    <script src="js/config.js"></script>
    
    <!-- Core do Sistema -->
    <script src="js/app.js"></script>
    
    <!-- M√≥dulos -->
    <script src="js/modules-receitas.js"></script>
    <script src="js/modules-despesas.js"></script>
    <script src="js/modules-auxiliares.js"></script>
    <script src="js/components.js"></script>
    
    <!-- Inicializa√ß√£o -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Atualiza ano no rodap√©
            document.getElementById('sidebarAno').textContent = new Date().getFullYear();
            
            // Inicializa o sistema
            if (typeof initSistema === 'function') {
                initSistema();
            }
        });
    </script>
    
</body>
</html>
